# Pages 040-079 Notes

## Chapters/Sections Covered
- **Chapter 3: Morphological Analysis** (pages 28-39, continuation)
  - 3.4 The algorithm
  - 3.4.1 Recursive morph decomposition
  - 3.4.2 Morph types
  - 3.4.3 Legal morph sequences
  - 3.4.4 Selectional rules and scoring
  - 3.4.5 Recognizing morphological mutations
  - 3.5 An example of a decomposition
  - 3.6 The lexicon
- **Chapter 4: The Phrase-Level Parser** (pages 40-51)
  - 4.1 Overview
  - 4.2 Input
  - 4.3 Output
  - 4.4 Parts of speech
  - 4.5 The part-of-speech processor
  - 4.6 The parser algorithm
  - 4.7 Some examples
- **Chapter 5: Morphophonemics and Stress Adjustment** (pages 52-56)
  - 5.1 Overview
  - 5.2 Input
  - 5.3 Output
  - 5.4 Morphophonemic rules
  - 5.5 Stress modification rules
  - 5.6 An example
- **Chapter 6: Letter-to-Sound and Lexical Stress** (pages 57-67)
  - 6.1 Overview
  - 6.2 Letter-to-sound
  - 6.3 Lexical stress placement

## Key Findings

### Morphological Analysis (DECOMP)
- Morph lexicon contains ~12,000 entries covering 10x that number of English words
- Recursive right-to-left decomposition with backtracking
- Uses FSM (Finite State Machine) to validate morph sequences
- Scoring system to rank multiple valid coverings

### Morph Types
- **FREE ROOT** (ROOT): Can appear alone or with affixes (e.g., side, cover, spell)
- **ABSOLUTE**: No affixes allowed (e.g., the, into, of)
- **PREFIX**: Precedes roots (e.g., pre, dis, mis)
- **INITIAL**: Only at word beginning (e.g., meta, centi)
- **DERIVATIONAL** (DERIV): Changes meaning/POS (e.g., ness, ment, y)
- **INFLECTIONAL** (INFL): Changes tense/number (e.g., ing, ed, s)
- **LEFT FUNCTIONAL ROOT** (LF-ROOT): Must be followed by derivational suffix (e.g., absorb in absorption)
- **RIGHT FUNCTIONAL ROOT** (RF-ROOT): Must be preceded by prefix (e.g., mit in permit, transmit)
- **STRONG**: Root with tense/number already encoded (e.g., went = go+PAST)
- **VOCALIC** (VOC): Suffix begins with vowel
- **NONVOCALIC** (NONV): Suffix begins with consonant
- **HYPHEN**: For hyphenated words

### Decomposition Scoring (Cost Units)
- 34 units for each PREFIX
- 101 units for first effective-root
- 133 units for additional effective-roots (64 extra if rightmost is STRONG)
- 35 units for each DERIV
- 64 units for each INFL
- 512-unit penalty for non-standard transitions

### Selectional Rules (Partial Orderings)
- ROOT > anything else
- PREFIX+ROOT > ROOT+DERIV > ROOT+INFL > ROOT+ROOT
- PREFIX+PREFIX+ROOT > ROOT+ROOT
- ROOT+DERIV+DERIV > ROOT+ROOT

### Spelling Changes at Morph Boundaries
- **y -> i**: embody+ment -> embodiment
- **Consonant doubling**: pad+ing -> padding
- **Silent e dropping**: fire+ing -> firing
- **Required**: scar+ed -> scarred
- **Forbidden**: alloy+ing -> alloying (not alloyying)
- **Optional**: change+able -> changeable or changing

### Phrase-Level Parser
- Uses ATN (Augmented Transition Network) interpreter
- Produces surface structure parse (not deep structure)
- Runs in real-time with limited resources
- No backtracking above phrase level
- Outputs: noun groups, verb groups, prepositional phrases, unclassified words

### Parts of Speech (Implementation Codes)
- NOUN (NUM SING) = singular noun
- NOUN (NUM PL) = plural noun
- VERB (INF TR) (PL TR) = infinitive verb
- VERB (SING TR) (PL TR) = past tense verb
- ADJ = adjective
- ADV (VMOD TR) (ADJMOD TR) = adverb modifying verb or adjective
- PREP = preposition
- CONJ = conjunction
- INTG = integer
- INTG (DEF FL) = integer requiring "a" (e.g., thousand)
- VERBING = present participle
- VERBEN = past participle
- TO = to
- SCONJ = sentential conjunction (e.g., whether)
- CONTR = contraction (e.g., 're)
- INTERJ = interjection (e.g., oh)

### Special Parts of Speech
- **COMMA**: Single punctuation mark
- **IPM**: Internal punctuation mark [: ; ( ) ' and "]
- **EPM**: End punctuation mark (sentence-final)
- **PDET**: Predeterminer (e.g., half, twice)
- **DETW**: Wh-word determiner
- **DETQ**: Quantified determiner
- **ORD**: Ordinals (next, last, first, etc.)
- **QUANT**: Quantifiers
- **MOD**: Modals (TO TR indicates can occur with "to")

### Morphophonemic Rules (SOUND1)
- Plurals/possessives after fricatives/affricates: IH ZZ or IX ZZ (busses, churches)
- After unvoiced segments: SS (backs, cat's)
- After voiced segments: ZZ (dogs, potatoes)
- Past tense after TT/DD: IH DD or IX DD (mended, minted)
- After voiced: DD (whispered, rowed)
- After unvoiced: TT (hushed)

### Palatalization Rules
- **-ion suffix**: t -> SH after n or s (retention, completion)
- **-ion suffix**: t -> CH after s (e.g., question pronounced with CH)
- **-ure suffix**: s -> SH after l or s (emulsion, compression)
- **-ure suffix**: s -> ZH after r or vowel (subversion, adhesion)
- **-ure suffix**: s -> CH after n (e.g., suspension)
- **-ic suffix**: preceding vowels e, i, y cause c -> KK (electric -> electricity with SS)

### Letter-to-Sound (LTS) Processing
- Three-stage process:
  1. Strip affixes (right-to-left, longest match first)
  2. Convert consonants (left-to-right)
  3. Convert vowels and affixes (left-to-right)
- Context-dependent rules using left and right context
- Statistical analysis of English determined rule ordering

### Stress Rules (Based on Halle & Keyser 1971)
- Three stress levels: 1-stress (primary), 2-stress (secondary), 0-stress (none)
- **Cyclic rules**: Apply from root outward, adding suffixes
- **Noncyclic rules**: Apply to entire word

## Equations Found

### Stress Pattern Matching Notation
- $C$ matches a single consonant
- $C_0$ matches zero or more consonants
- $C_1^0$ matches one or two consonants
- $V$ matches a single vowel
- $X$ and $Y$ match strings of any length
- Brackets $[ ]$ match vowel with associated features
- Parentheses $( )$ denote optional terms
- Braces $\{ \}$ denote alternatives separated by $/$

### Main Stress Rule (Cyclic)
$$V \rightarrow [1\text{-stress}] / X - C_0 \left\{ \begin{bmatrix} \text{short} \\ V \end{bmatrix} C_0^1 / V \right\} \left\{ \begin{bmatrix} \text{short} \\ V \end{bmatrix} C_0 / V \right\}$$

Where $X$ must contain all prefixes (prefixes never stressed by this rule).

### Stressed Syllable Rule (Cyclic)
$$V \rightarrow [1\text{-stress}] / X - C_0 \left\{ \begin{bmatrix} \text{short} \\ V \end{bmatrix} C_0^1 / V \right\} V C_0 \begin{bmatrix} 1\text{-stress} \\ V \end{bmatrix} Y$$

### Alternating Stress Rule (Cyclic)
$$V \rightarrow [1\text{-stress}] / X - C_0 V V C_0 \begin{bmatrix} 1\text{-stress} \\ V \end{bmatrix} C_0$$

### Destressing Rule (Noncyclic)
$$V \rightarrow [-\text{stress}] / C_0 V C_0 X - C \begin{bmatrix} \text{stress} \\ V \end{bmatrix} Y$$

With vowel shortening: EY -> AE, IY -> EH, AY -> IH, OW -> AA, UW -> UH

### Compound Stress Rule (Noncyclic)
- Retain 1-stress on rightmost position, reduce others to 2-stress
- Variants for words ending in IY, words with multiple syllables after primary stress

## Parameters Found

| Name | Symbol | Units | Default | Range | Notes |
|------|--------|-------|---------|-------|-------|
| Decomposition Cost - PREFIX | - | units | 34 | - | Per prefix morph |
| Decomposition Cost - First Root | - | units | 101 | - | First effective-root |
| Decomposition Cost - Additional Root | - | units | 133 | - | Additional roots |
| Decomposition Cost - STRONG penalty | - | units | 64 | - | If rightmost is STRONG |
| Decomposition Cost - DERIV | - | units | 35 | - | Per derivational suffix |
| Decomposition Cost - INFL | - | units | 64 | - | Per inflectional suffix |
| Non-standard penalty | - | units | 512 | - | For non-standard coverings |

## Rules/Algorithms

### Recursive Morph Decomposition Algorithm
```
find the longest morph which matches the right end of the current string
WHILE there is a match DO
    IF the matching morph is compatible with the current context (state)
    THEN remove the matched letters from the right side of the string,
         update the current state and score as a function of the type of
         the matched morph,
         find a set of possible spelling changes at the right end of the
             remainder,
         attempt a recursive decomposition for each spelling variation,
         save the results of the best-scoring of these variations,
         restore the remainder string, state, and score to their original
             values.
    END IF,
    find the next longest morph which matches the right end of the string.
END WHILE.
```

### Spelling Change Template Patterns (Table 3-1)
| Pattern | Change | Example |
|---------|--------|---------|
| ck+. | none or ck->c | packing->pack+ing, picnicking->picnic+ing |
| xx+i | none, xx->x, or xx->xxe | telling->tell+ing, padding->pad+ing, silhouetting->silhouette+ing |
| xx+. | none or xx->x | yeller->yell+er, reddest->red+est |
| e+e | e->ee (+) | freed->free+ed |
| e+i | none | dyeing->dye+ing |
| e+. | none | changeable->change+able |
| i+i | none | skiing->ski+ing |
| i+e | i->y or i->ie (+) | noisiest->noisy+est, eeriest->eerie+est |
| i+. | i->y or none | variation->vary+ation, deviate->devi+ate |
| y+i | none (+) or y->ye (+) | flying->fly+ing, eying->eye+ing |
| y+. | none | employer->employ+er |
| .+i | ->e, none, or ->y (*) | daring->dare+ing, showing->show+ing, harmonize->harmony+ize |
| .+. | ->e or none | observance->observe+ance, sender->send+er |

### FSM States for Morph Sequences
- **F0**: word <> {INFL [suffix]}
- **R0**: (affixed-word | LF-ROOT) <> DERIV [suffix]
- **R1**: (affixed-word | LF-ROOT) <> DERIV effective-root
- **M1**: PREFIX <> RF-ROOT [suffix]
- **L1**: [affixed-word | PREFIX | INITIAL] <> effective-root [suffix]
- **L0**: [affixed-word | PREFIX | INITIAL] <> PREFIX effective-root [suffix]
- **I0**: [word HYPHEN] <> (ABSOLUTE | INITIAL affixed-word)

### Part-of-Speech Processor Algorithm (Section 4.5)
1. Check if decomposition exists; if none, assign default POS based on suffix
2. For suffix -ING: POS = VERBING (if last morph is verb suffix) else VERBING
3. For suffix -ED: POS = VERBEN, VERB (SING TR) (PL TR)
4. For suffix -S/ES: Multiple checks based on preceding morphs
5. For suffix -ER: Check if comparative adverb, comparative adjective, or agent noun
6. Contractions ('VE, 'D, 'LL, 'RE): Assign appropriate verb forms

### Suffix Stress Categories
**Category 1 - Force stress on final/penultimate:**
- IH FF 'AY (-ify), 'AO RR IY (-ory), IH FF IH KK (-ific)

**Category 2 - Skip cycle (suffix not in domain):**
- DD AA MM (-dom), MM EH NN TT (-ment), LL EH SS (-less)

**Category 3 - Stress on suffix vowel, skip all cyclic rules:**
- 'IH RR (-eer), SS 'EH LL FF (-self), SH 'IH PP (-ship)

**Category 4 - Replace Main Stress Rule with first-syllable stress:**
- IH KK (-ic): Stress first syllable

**Special stress retention suffixes:**
- IH ZZ AX MM (-ism), IH VV (-ive), AE TT (vowel-reduced -ate)

## Figures of Interest
- **Fig 3-1 (page 31):** State transition diagram for morph sequence FSM - Shows states I0, L0, L1, M1, R0, R1, F0 and transitions labeled with morph types
- **Fig 3-2 (page 37):** Decomposition of "scarcity" - Complete trace showing recursive decomposition with scores
- **Fig 4-1 (page 47):** Noun group ATN listing - Complete state machine for parsing noun groups
- **Fig 4-2 (page 48):** Verb group ATN listing - State machine for verb group parsing
- **Fig 4-3 (page 49):** ATN diagram for verb groups - Visual graph representation
- **Fig 4-4 (page 50):** ATN diagram for noun groups - Visual graph representation
- **Fig 4-5 (page 51):** Example of PARSER operation - Shows actual parse output for sample text
- **Fig 5-1 (page 55):** Input to and output from SOUND1 - Example showing "Priscilla noted the houseboat's reflection"
- **Fig 6-1 (page 58):** Suffix detection in word "finishing" - Shows suffix analysis stages
- **Fig 6-2 (page 60):** Application of letter-to-sound rules to "caribou"
- **Fig 6-3 (page 60):** Application of letter-to-sound rules to "subversion"

## Tables of Interest
- **Table 3-1 (page 36):** Morph spelling change rules for vocalic suffixes - Complete pattern/change/example matrix

## Quotes Worth Preserving

> "The goal of the decomposition process is to obtain a morph *covering* of a word. The word 'covering' is used to indicate that a simple concatenation of morph spellings will not, in many cases, provide a correct analysis." (page 28)

> "The decision to search from the right end of the word was made early in the development of the system before the selectional rules were implemented. It was observed that the best decomposition was found first by stripping off suffixes before searching for roots and prefixes." (page 29)

> "The part of speech of a word is very important in text-to-speech processing. It is used in determining a parse for a sentence which is then used in algorithms determining fundamental frequency and duration." (page 38)

> "The parser for the text-to-speech system is designed to satisfy a unique set of constraints. It must be able to handle arbitrary text quickly, but does not need to derive semantic information." (page 40)

> "It is not always possible to simply concatenate the pronunciations of the constituent morphs of a word to get its pronunciation. There are sometimes changes in pronunciation at morph boundaries." (page 52)

> "The conversion of a letter string to a phonetic segment string in the letter-to-sound program proceeds in three stages. In the first stage, prefixes and suffixes are detected." (page 57)

> "The stress rules which have been implemented are a modification of a set of ordered rules developed by Halle and Keyser (1971)." (page 61)

## Implementation Notes

### Phonetic Segment Labels (Klatt symbols used)
**Short vowels:** AA, EH, IH, AO, UH, AX, and IX
**Long vowels:** EY, IY, AY, AX, and IX

### Morph Lexicon Entry Format
Each entry contains:
- Spelling
- Pronunciation (phonetic segments)
- Morph type code
- Part(s) of speech
- Spelling change code (forbidden/required/optional)

### Parser Output Node Format
For each phrase node:
1. Number of words covered
2. Part of speech (type of constituent)
3. Property list (attribute-value pairs)

For each word:
1. Spelling
2. Part-of-speech set
3. Property list for each part of speech

### Stress Marking Conventions
- `'` = primary stress (1-stress)
- `"` = secondary stress (2-stress)
- No mark = unstressed (0-stress)
- `*` = morph boundary
- `-` = syllable boundary

### LTS Rule Application Order
1. **Stage 1**: Affix detection (right-to-left)
2. **Stage 2**: Consonant conversion (least context-dependent, left-to-right)
3. **Stage 3**: Vowel and affix conversion (most context-dependent, left-to-right)

### Critical Implementation Detail - Syllabic Consonants
- Letter **r** is syllabic if preceded by consonant other than r and followed by morph-final e (e.g., acre)
- Letter **r** is syllabic in inflectional suffixes -s or -ed

### Palatalization Context Rules
- **t -> SH**: Before -ion after segments {SS, ZZ, SH, ZH, CH, JJ}
- **t -> CH**: After s before -ion (question)
- **s -> SH**: After l or s before -ure (emulsion)
- **s -> ZH**: After r or vowel before -ure (subversion)
- **s -> CH**: After n before -ure (suspension)
- **KK -> SS to KK SH**: Before -ion in some contexts (complexion)

## References to Other Chapters
- Chapter 3 output feeds Chapter 4 (PARSER)
- Chapter 4 output feeds Chapter 5 (SOUND1)
- Chapter 5 performs letter-to-sound for words not in DECOMP lexicon (described in Chapter 6)
- Chapter 8: Clause boundary detection rules
- Prosodic effects described in later chapters depend heavily on POS and phrase structure
- Klatt symbols for phonetic segments defined elsewhere (referenced on page 62)
