# Pages 200-229 Notes (FINAL CHUNK)

## Chapters/Sections Covered
- Appendix C (continued): Context-dependent rules for PHONET (pp. 188-201)
  - C.6 Sonorant rules (pp. 189-191)
  - C.6.1 Aspiration of unvoiced fricative/plosive intrudes on sonorant
  - C.6.2 Nonnasal sonorants
  - C.7 Vowels (pp. 192-193)
  - C.7.1 Diphthong rules
  - C.8 Obstruents (pp. 194-197)
  - C.8.1 Fricatives and plosives
  - C.8.2 Fricatives only
  - C.8.3 Stops
  - C.8.3.1 Insert burst at expense of closure duration
  - C.8.4 Nasals
  - C.9 Adjustments (pp. 198-200)
  - C.9.1 Boundary values for stops
  - C.9.2 All segments
  - C.10 Modifications (pp. 200-201)
- Appendix D: Sample test trials from Modified Rhyme Test (p. 202)
- Appendix E: Sample test materials from Harvard Psychoacoustic Sentences (p. 203)
- Appendix F: Sample test materials from Haskins Anomalous Sentences (p. 204)
- Appendix G: Sample passage for listening comprehension testing (pp. 205-206)
- References (pp. 207-214)
- Index (pp. 215-216)
- Back cover (p. 229)

## Key Findings

- **Forward smoothing time constants (Tcf)** differ by parameter: av=25ms, an=40ms, f1=80ms, fnz=150ms, formants (f2-f4)=80ms, amplitude params=40ms, f0=120ms
- **Bper (backward smoothing percent)** varies by manner class transitions - e.g., vowel-to-vowel=50%, stop-to-vowel=65%, sonorant-to-vowel=75%
- **Aspiration intrusion rules**: Aspiration between voiced sonorant and following unvoiced consonant is modeled with Aspdux parameter
- **F4 target adjustments**: Lower by 100 Hz if lips rounded; raise by 300 Hz for retroflex/lateral segments
- **Coarticulation formulas for LL and RR**:
  - LL: Target[f2] = 0.9*Target[f2] + 0.1*TARGET[f2,X]
  - RR: Target[f2] = 0.75*Target[f2] + 0.25*TARGET[f2,X]
- **Diphthong timing**: Tcenter and Tcdips control when formants reach target vs. offglide
- **Burst duration (Burdur)** defaults vary by consonant: BB=5ms, CH=15ms, DD=10ms, GG=20ms, KK=25ms, PP=5ms, TT=15ms
- **Stops have abrupt offset**: Bvalf[af] = Target[af] for plosives
- **Minimum formant separation is 200 Hz** - raise Target[f2..f4] to maintain this

## Equations Found

### Aspiration Duration
$$Aspdur \leftarrow min(Aspdur, Segdur[asp], segdur[av])$$

### Diphthong Timing
$$Tcenter[f1..f3] \leftarrow Tdmid \times Segdur[f1]$$
$$Tcdips[f1..f3] \leftarrow Tcdiph \times 0.5 \times (1 + Segdur[f1] / 45)$$

### Coarticulation for LL
$$Target[f2] \leftarrow 0.9 \times Target[f2] + 0.1 \times TARGET[f2, X]$$

### Coarticulation for RR
$$Target[f2] \leftarrow 0.75 \times Target[f2] + 0.25 \times TARGET[f2, X]$$
$$Target[f3] \leftarrow Target[f2] + 250$$

### Schwa Coarticulation
$$Target[f2] \leftarrow 0.9 \times Target[f2] + 0.1 \times 1450$$ (if next is -sonorant or +nasal)

### Velar Locus Calculation
$$Oldval[f2] \leftarrow Target[f2] + (Target[f1] - 300) \times 2$$ (for +velar)

### Boundary Value Calculation
$$Bvalf[av..f0] \leftarrow (Bper[av..f0] \times Target[av..f0] + (100 - Bper[av..f0]) \times Oldval[av..f0]) / 100$$

## Parameters Found

| Name | Symbol | Units | Default | Range | Notes |
|------|--------|-------|---------|-------|-------|
| Forward smoothing av | Tcf[av] | ms | 25 | - | Vowel amplitude |
| Forward smoothing an | Tcf[an] | ms | 40 | - | Nasal amplitude |
| Forward smoothing f1 | Tcf[f1] | ms | 80 | - | First formant |
| Forward smoothing fnz | Tcf[fnz] | ms | 150 | - | Nasal zero |
| Forward smoothing f2-f4 | Tcf[f2..f4] | ms | 80 | - | Formants 2-4 |
| Forward smoothing b1-b3 | Tcf[b1..b3] | ms | 80 | - | Bandwidths |
| Forward smoothing f0 | Tcf[f0] | ms | 120 | - | Fundamental freq |
| Forward smoothing af | Tcf[af] | ms | 40 | - | Frication amplitude |
| Forward smoothing asp | Tcf[asp] | ms | 20 | - | Aspiration |
| Aspiration duration | Aspdur | ms | 40 | 10-70 | Stressed word-initial |
| Aspiration amplitude | Aspam1 | dB | Aspamp | - | Target amplitude |
| Burst duration BB | Burdur[BB] | ms | 5 | - | Voiced bilabial |
| Burst duration DD | Burdur[DD] | ms | 10 | - | Voiced alveolar |
| Burst duration GG | Burdur[GG] | ms | 20 | - | Voiced velar |
| Burst duration PP | Burdur[PP] | ms | 5 | - | Voiceless bilabial |
| Burst duration TT | Burdur[TT] | ms | 15 | - | Voiceless alveolar |
| Burst duration KK | Burdur[KK] | ms | 25 | - | Voiceless velar |
| Burst duration CH | Burdur[CH] | ms | 15 | - | Affricate |
| Burst duration JJ | Burdur[JJ] | ms | 10 | - | Voiced affricate |

## Rules/Algorithms

### Sonorant Rules (C.6)
- Lower F4 by 100 Hz if +round
- Raise F4 by 300 Hz if +retro or +lateral
- Tcf[f1..b3] = 110 for YY glide followed by +round
- Tcf[f1..b2] = 75 for +liqgli (liquid/glide)
- Tcf[f3] = 90 for +liqgli, +retro
- Bper[f1..f3] = 35 for W-glide or Y-glide

### Aspiration Rules (C.6.1)
For unvoiced fricative/plosive after sonorant:
1. Base aspiration: Aspdur = 40 (stressed, word-initial voiceless plosive)
2. Reduce if unstressed: Aspdur = 20, Aspam1 /= 3
3. Lengthen in clusters: Aspdur = 55 (-labial followed by -vowel, -lateral)
4. Little aspiration if preceded by voiced: Aspdur -= 10
5. Large aspiration into silence: Aspdur = 70 (before +AXP)

### Nonnasal Sonorant Rules (C.6.2)
- LL coarticulation: Target[f2] = 0.9*Target[f2] + 0.1*TARGET[f2,X]
- RR coarticulation: Target[f2] = 0.75*Target[f2] + 0.25*TARGET[f2,X], Target[f3] = Target[f2]+250
- Transitions shorter into liquids and glides: Bper[f1..f3] = 90

### Vowel Rules (C.7)
- Heavy forward coarticulation of schwa with adjacent targets
- No schwa offglide before velar: Diptar[f2] = Target[f2]
- Velarization of front vowels before +lateral: Diptar[f2] -= 300
- YU fronted before alveolar plosive: Diptar[f2] += 200
- Short nonretro vowel centralization: Shift toward 490,1450,2500 Hz with 60ms time constant

### Diphthong Rules (C.7.1)
- Set Tcdiph and Tdmid from Table C-5
- Tcenter[f1..f3] = Tdmid * Segdur[f1]
- Tcdips[f1..f3] = Tcdiph * 0.5 * (1 + Segdur[f1]/45)
- Earlier diphthongization after HH in tense vowels: Tcenter *= 0.67
- Bandwidth adjustments: Bvalf[f1] += 70 for OY; Bvalf[f2] += 200 for AY/OY; Bvalf[f3] -= 200 for AY/OY

### Obstruent Rules (C.8)
**Fricatives and Plosives (C.8.1):**
- Devoice if not followed by vowel: Target[avc] -= 30
- Lower F4 by 150 Hz for +palatal
- Parallel formant targets for alveolar+retro: a2p..a6p = 0,67,60,65,65
- Parallel formant targets for alveolar-retro: a2p..a6p = 0,52,60,70,73
- Reduce burst amplitude by 5 dB for velar before -vowel
- No voicebar in voiced plosive if preceded by obstruent: Target[avc] = 0

**Fricatives Only (C.8.2):**
- Target[af] -= 4 before SIL
- Short fricatives boost target: Target[af] += (80-Segdur[af])*deltat/7 if Segdur<80ms
- Stronger voicing between vowels: Target[avc] = 60
- Palatal rounding before rounded vowel: Target[f2] -= 50, Target[f3] -= 200

**Stops (C.8.3):**
- Transition into stop partially discontinuous (except f0)
- Trantype[av..f1] = SMODIS, Trantype[f2..b3] = SETSMO
- Tcf[f2..b3] = 10, Tcf[f1] = 15 for +high stop
- Forward smoothing (Tcobst) from Table C-6: BB=60, CH=100, DD=80, GG=100, KK=100, PP=80, TT=80

**Burst Insertion (C.8.3.1):**
- Set Burdur from Table C-7
- Burdur += 10 for TT before +retro
- Burdur = Segdur[af] if Burdur > Segdur[af]
- Burdur = 5 if Burdur = 0
- Decrease af by 20 dB at Cumdur[af] and smooth backward 30ms
- Burst amplitude adjustments: +6 dB if -voiced, -6 dB if +nasal preceding and -stress, -3 dB if -nasal and -stress, -3 dB if +AXP or +fricative following

**Nasals (C.8.4):**
- Target[fnz] = 450
- Trantype[af..b3] = SMODIS

### Boundary Adjustments (C.9)

**Boundary Values for Stops (C.9.1):**
- Bper[f2] = 75, Bper[f3] = 75 for +retro
- Bper[f2] = 20, Tcf[f2] += 30 for +palatal, -sonor (SH, ZH)
- Bper[f2] = 50, Bper[f3] = 0 after stop (general case)
- Bper[fnz] = 100 if Mancur-Manlas > 1, else 0; Tcf[fnz] = 150, Bper[f1] = 0 for +nasal
- Labial stop locus values vary by following vowel frontness:
  - +front: Bper[f2]=65, Bper[f3]=20
  - -front: Bper[f2]=20, Bper[f3]=70
  - +retro: Oldval[f3]=1750, Bper[f3]=20
- Alveolar stop: Oldval[f2]=1050 before +lateral; Oldval[f2]=1400 before NN, -lateral
- Alveolar F3 locus: Oldval[f3]=2300 for +retro, 2620 for -retro

**Velar Locus Calculation:**
- Oldval[f2] = Target[f2] + (Target[f1]-300)*2 (f1 reflects lip rounding, f2 reflects fronting)
- Oldval[f3] = Oldval[f2] + 800 for +labial
- Oldval[f3] = Oldval[f2] + 400 for -labial
- Fronted articulation for KK, GG, NG adjacent to IY, IH: Oldval[f2] += 250, Oldval[f3] += 50

**All Segments (C.9.2):**
- Alveolar stop before WW: Oldval[f2,f3,f4] = 1200, 2050, 2500; Bper[f4] = 0; Tcf[f4] = 30
- Retroflex/retro glide before alveolar: Target[f2,f3] = 1850, 2200; Target[f4] += f4
- Retroflex/retro glide before velar: Target[f2,f3] = 1700, 1900
- W-glide before velar: Target[f2,f3] = 900, 2000; else Target[f2] = 1900

### Final Modifications (C.10)
- For DX: Target[f1..f3] = average(Target, Oldval, Nextar)
- Shorter F2 transitions for +f2back: Tcf[f2] -= 20
- Minimum formant separation 200 Hz enforced
- Set boundary values: Tcb = Tcf; Bvalf = (Bper*Target + (100-Bper)*Oldval)/100
- Discontinuous formant jump in lateral release: Bvalf[f1,f2] += 50, Bvalb[f1,f2] -= 50
- DISSMO in diphthongs changed to SMOOTH, so modify boundary: Bvalb[f1..f3] = Oldval[f1..f3]
- Amplitude parameter special treatment: Bvalf[av..ab,avc] = average(Target, Oldval)
- Vowel amplitude offset more gradual: Tcb[av] = 30
- Voicing offset gradual in stop/fricative: Bvalb[av], Bvalf[av] reduced by 4-6 dB
- Glottal segments (including SIL) have no inherent targets - inherit from context
- Stops have abrupt offset: Bvalf[af] = Target[af]

## Figures of Interest
- **Figure C-1 (p. 189):** Pre-aspiration parameter smoothing - shows how asp is smoothed linearly over 30ms before Cumdur[asp], from Oldval up to Aspam1
- **Figure C-2 (p. 194):** Diphthong transition smoothing - illustrates timing of Target, Tcdips, and Diptar relative to Mintime, Cumdur, Cumdur+Tcenter, and Cumdur+Segdur

## Tables of Interest
- **Table C-3 (p. 188):** Default forward smoothing durations (Tcf) for all parameters
- **Table C-4 (p. 188):** Default Bper values based on previous/current manner class transitions
- **Table C-5 (p. 194):** Diphthong transition parameters (Tcdiph, Tdmid) for each vowel:
  - AA: 0, 80 | AE: 100, 75 | AH: 0, 0
  - AO: 110, 80 | AW: 120, 70 | AXR: 125, 40
  - AY: 100, 55 | EH: 60, 70 | ER: 180, 50
  - EXR: 100, 50 | EY: 140, 55 | IH: 90, 65
  - IXR: 100, 50 | IY: 200, 45 | OW: 150, 50
  - OXR: 110, 60 | OY: 150, 60 | UH: 90, 65
  - UW: 140, 55 | UXR: 150, 50 | YU: 100, 45
- **Table C-6 (p. 196):** Duration of forward smoothing for obstruents (Tcobst)
- **Table C-7 (p. 197):** Default plosive burst durations (Burdur) - critical for stop synthesis

## Quotes Worth Preserving

> "Minimum formant separation is 200 Hz: raise Target[f2..f4] such that separation is at least 200Hz." (p. 200)

> "Glottal segments (including SIL) have no inherent 'articulatory' targets" (p. 201)

> "Stops have abrupt offset: Bvalf[af] = Target[af]" (p. 201)

> "Add f1 and f2 vowel targets to compute f2 locus for velar (f1 reflects lip-rounding and f2 reflects fronting components of systematic shift in locus)" (p. 199)

## Implementation Notes

### Transition Type Constants
The rules use several transition type constants:
- **DISCON** - Discontinuous transition
- **SMODIS** - Smooth-discontinuous (smooth approach, discontinuous at boundary)
- **DISSMO** - Discontinuous-smooth (discontinuous at onset, smooth thereafter)
- **SETSMO** - Set and smooth
- **SMOOTH** - Fully smooth transition

### Parameter Track Drawing Order
The final step "Draw all parameter tracks" (p. 201) suggests the system generates continuous parameter trajectories after all rules have set targets, boundaries, and transition types.

### Burst Implementation Details
1. Insert burst segment at expense of closure duration
2. Burst duration capped at segment duration
3. Minimum burst duration is 5ms
4. AF amplitude drops 20dB at burst onset with 30ms backward smoothing
5. Burst amplitude modified by voicing, stress, and context

### Coarticulation Implementation
- LL and RR use weighted averaging with following segment's F2 target
- RR has F3 computed as F2+250 (constant offset)
- Schwa heavily coarticulates with both preceding and following targets
- Short vowels centralize toward neutral position (490, 1450, 2500 Hz)

### Velar Locus Formula
The velar locus is computed dynamically from the adjacent vowel's F1 and F2:
```
Oldval[f2] = Target[f2] + (Target[f1] - 300) * 2
```
This captures the well-known velar pinch effect where velar stops have loci that track vowel formants.

### Critical Timing Parameters
- Pre-aspiration smoothing: 30ms
- Vowel centralization time constant: 60ms
- Diphthong timing scaled by segment duration (Segdur/45 factor)

## References to Other Chapters
- Table C-5 referenced for diphthong parameters (p. 193)
- Table C-6 referenced for obstruent forward smoothing (p. 196)
- Table C-7 referenced for burst durations (p. 196)
- Figure C-1 illustrates aspiration smoothing (p. 189)
- Figure C-2 illustrates diphthong transitions (p. 194)
- Index points to key topics: Cascade/parallel synthesizer p.126, Formant synthesis p.124, Glottal waveform pp.130,133, Vocal tract model pp.139,144,173

## Key References from Bibliography (Implementation-Relevant)
- Klatt 1980: "Software for a Cascade/Parallel Formant Synthesizer" JASA 67:971-95 - Core synthesizer paper
- Klatt 1976a: "Structure of a Phonological Rule Component for a Synthesis-by-Rule Program" IEEE Trans ASSP-24:391-8
- Klatt 1979a: "Synthesis by Rule of Consonant-Vowel Syllables" in Speech Communication Group Working Papers
- Allen, Hunnicutt, Granstrom 1979: "MITalk-79: The MIT Text-to-Speech System" - System description
- Flanagan 1972: "Voices of Men and Machines" JASA 51:1375-87
- Stevens & Klatt 1974: "Current Models of Sound Sources for Speech" - Source models

## Index Cross-References (for navigation)
- Cascade/parallel synthesizer: p.126
- Formant synthesis: p.124
- Formant vocoding: p.75
- Frication noise: p.131
- Glottal waveform: pp.130, 133
- Kaiser window: p.110
- Linear prediction: pp.75, 110
- Locus theory: pp.78, 112
- Nasal murmurs: pp.120, 142, 147
- Parameter update rate: p.128
- Phonetic targets: p.108
- Radiation characteristic: pp.124, 136, 150
- Resonator (digital): p.128
- Resonator (low-pass): p.130
- Sinusoidal voicing: p.134
- Vocal tract model: pp.139, 144, 173
- Waveform discontinuities: p.138
- Waveform sampling rate: p.127
