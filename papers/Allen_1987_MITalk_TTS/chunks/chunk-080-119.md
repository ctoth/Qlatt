# Pages 080-119 Notes

## Chapters/Sections Covered
- **Chapter 6 (end)**: Letter-to-sound and lexical stress (sections 6.3.7-6.4)
- **Part II: Synthesis** (title page)
- **Chapter 7**: Survey of speech synthesis technology (7.1-7.4)
- **Chapter 8**: The phonological component (8.1-8.6)
- **Chapter 9**: The prosodic component (9.1-9.2)
- **Chapter 10**: The fundamental frequency generator (10.1-10.6)

## Key Findings

### Stress Assignment Rules (pp. 68)
- **Strong First Syllable Rule (noncyclic)**: Assigns 2-stress to vowel in first syllable if long, or if followed by at least two consonants
- **Cursory Rule**: Vowel following primary-stressed vowel is shortened and destressed if it's not the last vowel
- **Vowel Reduction Rule**: Reduces unstressed short vowels - EH/IH become IX, all other short vowels become AX

### MITalk Synthesis Pipeline (p. 72, Figure 7-1)
```
TEXT → ANALYSIS COMPONENTS → PHONO1 → PHONO2 → PROSOD → F0TARG → PHONET → CWTRAN → COEWAV → SPEECH WAVEFORM
```
- PHONO1/PHONO2: Phonological component
- PROSOD: Prosodic component
- F0TARG: Fundamental frequency targets
- PHONET: Phonetic component
- CWTRAN/COEWAV: Formant synthesizer

### Speech Storage Requirements (p. 71)
- Starting from PHONO2: ~100 bits per sentence
- Starting from PHONET with natural F0/durations: ~250 bits per second
- Word assembly with LP representation: 1000 bit-per-second linear-prediction on IC chips

### Synthesis Unit Comparison (pp. 76-78)
- **Words**: Large vocabulary needed, prosodic rules complex
- **Syllables**: ~1000 demisyllables for any English utterance, coarticulation at boundaries problematic
- **Diphones**: ~1500 elements (40 phonemes × ~40), natural coarticulation preserved
- **Phonemes**: ~40 units but require complex coarticulation rules

### Phonological Component Overview (p. 81)
- PHONO1: Uses syntactic markers, handles pausing
- PHONO2: Segmental recoding rules, allophone selection, simplifies unstressed sequences
- Pauses inserted at: sentence boundaries, clause boundaries, punctuation marks, long phrases

### Phoneme Inventory Special Cases (pp. 82-83)
1. Diphthongs AY, AW, OW, YU treated as single phonemes (not AA+IY etc.)
2. Affricates CH and JJ treated as single phonemes (not TT+SH etc.)
3. Vowel+RR syllabic nuclei: IXR (beer), EXR (bear), AXR (bar), OXR (boar), UXR (pure)
4. Syllabic consonants: EL (bottle), EM (keep'em), EN (button)
5. Dental flap DX, glottalized TT (TQ), velarized LL (LX) are allophones
6. Pseudo-vowel AXP inserted between plosive and following pause

### Stress Feature Values (p. 86)
- Stress = 0 (unstressed) or 1 (stressed)
- Vowels preceded by stress symbol (', ", or 1) get value 1
- Consonants preceding stressed vowel also get stress=1 if word-initial and acceptable cluster

### Segmental Phonology Rules (pp. 87-88)
1. **Velarized L**: Substitute LX for LL if preceded by vowel and followed by anything except stressed vowel
2. **Flapping**: Replace TT or DD by alveolar flap DX within words and across word boundaries if followed by non-primary-stressed vowel and preceded by nonnasal sonorant
3. **Word-final glottalization**: TT preceded by sonorant → glottal stop TQ (unless next word starts with stressed sonorant)
4. **Voiceless plosive non-release**: Not released if next segment is another voiceless plosive in same clause
5. **Glottal stop insertion**: Before word-initial stressed vowel if preceding segment is syllabic (not determiner) or voiced nonplosive with intervening phrase boundary
6. **"the" pronunciation**: DH IY before vowels, DH AX otherwise

### Pause Durations (p. 88)
- Sentence boundary: 800 msec (sufficient for breath)
- After 5+ words: 800 msec breath pause
- End of paragraphs: 1200 msec
- Sentence-internal (punctuation): 400 msec
- Clause boundaries: additional pauses as needed

## Equations Found

### Duration Model (p. 94)
$$DUR = ((INHDUR - MINDUR) \times PRCNT) / 100 + MINDUR$$

Where:
- INHDUR = inherent duration (msec)
- MINDUR = minimum duration (msec)
- PRCNT = percentage shortening (0-100+)

### Percentage Update (p. 95)
$$PRCNT = (PRCNT \times PRCNT1) / 100$$

Each rule modifies PRCNT by multiplying by PRCNT1 factor.

### Non-phrase-final Postvocalic Adjustment (p. 97)
$$PRCNT1 = 70 + 0.3 \times PRCNT1$$

Applied when vowel is non-phrase-final to reduce the effect.

## Parameters Found

| Name | Symbol | Units | Default | Range | Notes |
|------|--------|-------|---------|-------|-------|
| Inherent Duration | INHDUR | msec | varies | see Table 9-1 | Base duration in carrier phrase |
| Minimum Duration | MINDUR | msec | varies | see Table 9-1 | Cannot go below this |
| Percentage | PRCNT | % | 100 | 0-200+ | Modified by rules |
| Speaking Rate | SPRATE | wpm | 180 | 60-300 | Words per minute |
| Declination Base (Tune A) | - | Hz | 110 | - | Lower declination line |
| Declination Base (Tune B) | - | Hz | 125 | - | For yes/no questions |
| Basic Rise | - | % | 40 | - | % of distance to peak |
| Basic Fall | - | % | 20 | - | % of distance from peak |

## Rules/Algorithms

### Duration Rules (10 rules, pp. 95-98)

1. **Pause insertion**: 200 msec before main clause, at syntactic comma, but not before relative clauses. "(R)" symbol marks these locations.

2. **Clause-final lengthening**: PRCNT1=140 for vowel/syllabic consonant in syllable before pause. Consonants between vowel and pause also lengthened by 140.

3. **Non-phrase-final shortening**: PRCNT1=60 for syllabic segments not in phrase-final syllable. Phrase-final postvocalic liquid/nasal gets PRCNT1=140.

4. **Non-word-final shortening**: PRCNT1=85 for syllabic segments not in word-final syllable.

5. **Polysyllabic shortening**: PRCNT1=80 for syllabic segments in polysyllabic words.

6. **Non-initial-consonant shortening**: PRCNT1=85 for consonants in non-word-initial position.

7. **Unstressed shortening**: Set MINDUR=MINDUR/2 for unstressed segments, then apply PRCNT1 factors:
   - Word-medial syllabic: 50
   - Other syllabic: 70
   - Prevocalic liquid/glide: 10
   - All others: 70

8. **Lengthening for emphasis**: PRCNT1=140 for emphasized vowels.

9. **Postvocalic context of vowels**:
   | Context | PRCNT1 |
   |---------|--------|
   | Open syllable, word-final | 120 |
   | Before voiced fricative | 160 |
   | Before voiced plosive | 120 |
   | Before nasal | 85 |
   | Before voiceless plosive | 70 |
   | Before all others | 100 |

   Non-phrase-final adjustment: PRCNT1 = 70 + 0.3*PRCNT1

10. **Shortening in clusters**: PRCNT1=120 for vowel followed by vowel, PRCNT1=70 for vowel preceded by vowel, PRCNT1=50 for consonant surrounded by consonants, PRCNT1=70 for consonant preceded/followed by consonant.

11. **Lengthening for plosive aspiration**: PRCNT to 140 for 1-stressed/2-stressed vowel/sonorant preceded by voiceless plosive (lengthened by 25 msec per Peterson & Lehiste 1960).

### F0 Algorithm - O'Shaughnessy (pp. 103-107)

**High Level System** (syntactic):
- Tune A: Declaratives - linear falling F0, sharp fall on last content word
- Tune B: Yes/no questions - flat F0, sharp terminal rise
- Third tune for wh-questions - high peak on question word, steeper fall

**Sentence type** determines global tune:
- Declaratives: Tune A (falling declination, steeper)
- Yes/no questions: Tune B (flatter, terminal rise)

**Clause contour**: Sharp rise at syntactic unit start, sharp fall at end.

**Phrase contour**: Initial F0 rise on first content word, final F0 fall on last content word.

**Word contour**: Rise-fall on stressed syllable of each content word. Amount of F0 movement depends on:
- Part of speech rank (Table 10-1)
- Number of syllables in word
- Number of intervening unstressed syllables

**Low Level System** (phonemic):
- Peak height depends on accent number and declination
- Peaks decrease along declination line
- Maximum F0 ~ 190 Hz (excursions above rare)
- Final F0 in statements lowered by 10 Hz

**F0 Target Calculation**:
- Basic rise = 40% of distance from lower declination (110 Hz Tune A, 125 Hz Tune B) to peak
- Basic fall = 20% of distance from peak to declination line
- Boundary peaks: more rise, less fall
- Phrase-final peaks: less rise, higher valley
- Intervening unaccented syllables: more rise/fall on surrounding peaks (±15-30%)

**Adjacent Accented Syllables**:
- Two adjacent: rise values reduced 40%
- Separated by 2-3 unaccented: rise increased 15%, 20%, 30%
- Peak height on accented syllable preceded by 2-3 unaccented: decreased 15%, 25%

**Continuation Rise** (p. 106):
- 16 Hz assigned to last syllable after nonterminal punctuation/conjunction
- 8 Hz if more than 5 words since last content word

**Unaccented Syllable F0**:
- If unaccented syllables between accented: linear/exponential fall spread across them
- Within phrase: linear fall
- Not in phrase: exponential (earlier syllables get more fall)

## Figures of Interest

- **Fig 6-4 (p. 69)**: Example of letter-to-sound and stress rule operation on "MULTIPAGIINATION" - shows complete pipeline from stripped input through all rule applications
- **Fig 7-1 (p. 72)**: Synthesis blocks of MITalk system - complete pipeline diagram
- **Fig 7-2 (p. 74)**: Spectrograms comparing words in isolation vs. continuous speech - demonstrates coarticulation effects
- **Fig 8-1 (p. 82)**: Example of PHONO1 and PHONO2 processing for "The old man sat in a rocker"
- **Fig 9-1 (p. 94)**: Example of PROSOD processing showing phoneme, duration, F0, and stress assignments
- **Fig 10-1 (p. 105)**: Example of F0 contours showing declination line, continuation rise, glottal stop effects

## Tables of Interest

- **Table 8-1 (p. 84)**: Complete Klatt symbol inventory - vowels, consonants, stress symbols, boundaries, syntactic markers
- **Table 9-1 (p. 96)**: Minimum and inherent durations for all segment types (critical for implementation)
- **Table 10-1 (p. 101)**: Relative peak levels by part of speech (0=article to 14=sentential adverb)

## Quotes Worth Preserving

> "Speech represented in this way requires storage of only about 100 bits per second." (p. 71, on PHONO2 input)

> "If durations and fundamental frequency values are taken from a natural recording rather than being computed by rule, a remarkably human voice quality is achieved." (p. 71)

> "The rules account for 84 percent of the observed total variance in segmental durations for speaker DHK." (p. 98)

> "Seventeen msec is generally less than the just noticeable difference for a single change to segmental duration in sentence materials." (p. 98, on rule system precision)

> "The peak on a stressed syllable is proportional to the accent number, but is also decreased through the sentence." (p. 105)

## Implementation Notes

### Symbol Inventory (Table 8-1, p. 84)
**Vowels**: AA, AE, AH, AO, AW, AX, AXR, AY, EH, ER, EXR, EY, IH, IXR, IY, OW, OXR, OY, UH, UW, UXR, YU

**Sonorant Consonants**: EL, HH, HX, LL, LX, RR, RX, WW, WH, YY

**Nasals**: EM, EN, MM, NN, NG

**Fricatives**: DH, FF, SS, SH, TH, VV, ZZ, ZH

**Plosives**: BB, DD, DX, GG, GP, KK, KP, PP, TT, TQ

**Affricates**: CH, JJ

**Pseudo-vowel**: AXP (plosive release)

**Stress**: ' or 1 (primary), " or 2 (secondary)

**Boundaries**: - (syllable, ignored), * (morpheme), C: (content word), F: (function word)

**Syntactic**: . (declarative end), , (comma), )P (breath pause), )? (yes/no question), )N (noun phrase end), )C (clause end)

### Duration Table Values (Table 9-1, p. 96)
Format: PHONEME MIN INHERENT

**Vowels**:
- AA: 100, 240 | AE: 80, 230 | AH: 60, 140
- AO: 100, 240 | AW: 100, 260 | AX: 60, 120
- AXR: 120, 260 | AY: 150, 250 | EH: 70, 150
- ER: 80, 180 | EXR: 130, 270 | EY: 100, 190
- IH: 40, 135 | IX: 60, 110 | IXR: 100, 230
- IY: 55, 155 | OW: 80, 220 | OXR: 130, 240
- OY: 150, 280 | UH: 60, 160 | UW: 70, 210
- UXR: 110, 230 | YU: 150, 230

**Sonorant Consonants**:
- EL: 110, 260 | HH: 20, 80 | HX: 25, 70
- LL: 40, 80 | LX: 70, 90 | RR: 30, 80
- RX: 70, 80 | WW: 60, 80 | WH: 60, 70
- YY: 40, 80

**Nasals**:
- EM: 110, 170 | EN: 100, 170 | MM: 60, 70
- NN: 50, 60 | NG: 60, 95

**Fricatives**:
- DH: 30, 50 | FF: 80, 100 | SS: 60, 105
- SH: 80, 105 | TH: 60, 90 | VV: 40, 60
- ZZ: 40, 75 | ZH: 40, 70

**Plosives**:
- BB: 60, 85 | DD: 50, 75 | DX: 20, 20
- GG: 60, 80 | GP: 40, 80 | KK: 60, 80
- KP: 40, 80 | PP: 50, 90 | TT: 50, 75
- TQ: 50, 75

**Affricates**:
- CH: 50, 70 | JJ: 50, 70

**Pseudo-vowel**:
- AXP: 70, 70

### F0 Algorithm Implementation Details

**Part of Speech Levels** (Table 10-1):
- 0: article
- 1: conjunction, relative pronoun
- 2: preposition, auxiliary verb, unstressable modal, vocative
- 3: personal pronoun
- 6: verb, demonstrative pronoun
- 7: noun, adjective, adverb, contraction
- 8: reflexive pronoun
- 9: stressable modal
- 10: quantifier
- 11: interrogative adjectives
- 12: negative element
- 14: sentential adverb

Levels 6+ are "content" words that produce F0 peaks.

**Declination Parameters**:
- Tune A (statements): base 110 Hz, steeper slope
- Tune B (yes/no questions): base 125 Hz, flatter slope
- Maximum excursion: ~190 Hz (rarely exceeded)
- Final F0 lowered by 10 Hz in statements

**F0 Update Frequency**: Every 5 msec (can also use absolute value per syllable)

### Error Analysis Notes (pp. 85-86)
- Phonetic transcription errors: ~5% (mostly I/schwa confusion)
- Lexical stress errors: ~1% (about 1 word in 20)
- Syntactic errors: largest category - incorrect phrase/clause boundary placement
- Extra ")C" pauses added intentionally to break long utterances

## References to Other Chapters
- Chapter 2-6: Analysis components (text normalization, morphology, letter-to-sound)
- Chapter 11: PHONET (phonetic component) - produces 20 synthesis parameters every 5 msec
- Chapter 12: CWTRAN/COEWAV - the Klatt formant synthesizer
- Chapter 13: Intelligibility and comprehension evaluation results
